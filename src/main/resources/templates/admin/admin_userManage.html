<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="UTF-8">
    <title>管理员</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <!-- Tell the browser to be responsive to screen width -->
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">
    <!-- Favicon icon -->
    <link rel="icon" type="image/png" sizes="16x16" th:href="@{/assets/images/favicon.png}"
          href="../../static/assets/images/favicon.png">
    <title>Travel Life | Admin</title>
    <script type="text/javascript" th:src="@{/js/adminPage.js}" src="../../static/js/adminPage.js"></script>
    <link rel="stylesheet" th:href="@{/css/font-awesome-4.7.0/css/font-awesome.min.css}"  media="all">
    <link rel="stylesheet" th:href="@{/lib/layui-v2.3.0/css/layui.css}"  media="all">
    <link rel="stylesheet" th:href="@{/css/main.css}"  media="all">
    <link th:href="@{/css/adminPage.css}" rel="stylesheet" media="all">
    <link th:href="@{/css/allScripts.css}" rel="stylesheet" media="all">

</head>

<body class="timo-layout-page">
<div class="layui-card">
 
   <div class="layui-card-header timo-card-header">
        <span><i class="fa fa-bars"></i> 用户管理</span>
        <i class="layui-icon layui-icon-refresh refresh-btn"></i>
    </div>
  <div class="layui-row timo-card-screen">
            <div class="pull-right screen-btn-group">
                <button class="layui-btn open-popup" data-title="添加用户" th:attr="data-url=@{/admin/UserAdd}"
                        data-size="auto">
                    <i class="fa fa-plus"></i> 添加
                </button>
               
            </div>
        </div>
<!-- ============================================================== -->
<!-- Main wrapper - style you can find in pages.scss -->
<!-- ============================================================== -->
<div id="main-wrapper" data-navbarbg="skin6" data-theme="light" data-layout="vertical" data-sidebartype="full"
     data-boxed-layout="full">

    <form action="#" id="myform" method="post">
        <div class="page-wrapper1">

            <div class="container-fluid">
                <!-- ============================================================== -->
                <!-- Start Page Content -->
                <!-- ============================================================== -->

                <div class="col-12">
                    <div class="card">
                        <div class="table-responsive">

                            <table  class="layui-table timo-table">
                                <thead>
                                <tr>
                                    <th scope="col">Id</th>
                                    <th scope="col">UserName</th>
                                    <th scope="col">Sex</th>
                                      <th scope="col">操作</th>
                                </tr>
                                </thead>
                                <tbody>

                                <tr th:each="user,iterStat : ${page.content}">

                                    <td th:text="${user.id}"></td>
                                    <td th:text="${user.name}"></td>
                                    <td th:text="${user.sex}"></td>
                                    <td>

                                        <a   href="javascript:;" class="fenpei" th:attr="userId=${user.id}">
                                                                                                       分配角色
                                        </a>

                                        <a href="#" th:href="@{/admin/UserManage/{id}/UserDelete(id=${user.id})}">
                                                                                                    删除 
                                        </a>

                                    </td>
                                </tr>

                                </tbody>
                            </table>


                        </div>
                    </div>
                </div>
            </div>
            <div class="center">
                <ul class="pagination" th:if="${page.totalPages}>1">

                    <li><a href="#" th:href="@{/admin/UserManage(page=${page.number-1})}">上一页</a></li>
                    <li><a href="#" th:href="@{/admin/UserManage(page=${page.number+1})}">下一页</a></li>
                </ul>
            </div>
        </div>
     <!--    <a href="#" th:href="@{/admin/UserAdd}">
            <button id="delete" type="button" style="float: right;margin-right: 40px;">添加</button>
        </a> -->
    </form>
</div>

</div>
<script th:src="@{/lib/layui-v2.3.0/layui.js}" charset="utf-8"></script>
 <script th:src="@{/js/main.js}" charset="utf-8"></script>
<script>
    layui.use(['layer','jquery'],function () {
        var layer = layui.layer;
        var $ = layui.jquery;

        $(".fenpei").on('click',function () {
            var id = $(this).attr("userId");
            var layerArea = ['50%', '80%'];
            var url = '/system/user/role?ids='+id;
            window.layerIndex = layer.open({
                type: 2,
                title: "分配角色",
                shadeClose: true,
                maxmin: true,
                area: layerArea,
                content: [url, 'on']
            });
        })

    })

</script>

<!-- ============================================================== -->
<!-- Jquery -->
<!-- ============================================================== -->
<script src="../../static/assets/libs/jquery/dist/jquery.min.js"
        th:src="@{/assets/libs/jquery/dist/jquery.min.js}"></script>
<!-- Bootstrap tether Core JavaScript -->
<script src="../../static/assets/libs/popper.js/dist/umd/popper.min.js"
        th:src="@{/assets/libs/popper.js/dist/umd/popper.min.js}"></script>
<script src="../../static/assets/libs/bootstrap/dist/js/bootstrap.min.js"
        th:src="@{/assets/libs/bootstrap/dist/js/bootstrap.min.js}"></script>
<!-- slimscrollbar scrollbar JavaScript -->
<script src="../../static/assets/extra-libs/sparkline/sparkline.js"
        th:src="@{/assets/extra-libs/sparkline/sparkline.js}"></script>
<!--Wave Effects -->
<script src="../../static/js/waves.js" th:src="@{/js/waves.js}"></script>
<!--Menu sidebar -->
<script src="../../static/js/sidebarmenu.js" th:src="@{/js/sidebarmenu.js}"></script>
<!--Custom JavaScript -->
<script src="../../static/js/custom.min.js" th:src="@{/js/custom.min.js}"></script>
<th:block th:include="./common/include :: csrf" />
</body>
</html>
            
            